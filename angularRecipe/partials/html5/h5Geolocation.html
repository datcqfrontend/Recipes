<div  id="html5Geolocation" class="html5 section">

    <div class="container">
        <div ng-include='"templates/jumbotron-topic.html"'></div>

        <div class="row">
            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Locate the User's Position</h3> </div>
                  <div class="panel-body">  
                    <p>
                        The HTML Geolocation API is used to get the geographical position of a user.
                        <br>Since this can compromise user privacy, the position is not available unless the user approves it.

                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Browser Support</h3> </div>
                  <div class="panel-body">  
                    <p>
                        The numbers in the table specify the first browser version that fully supports Geolocation.
                        <table class="table table-bordered">
                          <tbody><tr>
                            <th style="width:20%;font-size:16px;text-align:left;">Element</th>
                            <th style="width:16%;" class="bsChrome" title="Chrome"><img src="media/images/compatible_chrome.gif" title="Chrome" alt="Chrome" ></th>
                            <th style="width:16%;" class="bsIE" title="Internet Explorer"><img src="media/images/compatible_ie.gif" title="Internet Explorer" alt="Internet Explorer" ></th>
                            <th style="width:16%;" class="bsFirefox" title="Firefox"><img src="media/images/compatible_firefox.gif" title="Firefox" alt="Firefox"></th>
                            <th style="width:16%;" class="bsSafari" title="Safari"><img src="media/images/compatible_safari.gif" title="Safari" alt="Safari"></th>
                            <th style="width:16%;" class="bsOpera" title="Opera"><img src="media/images/compatible_opera.gif" title="Opera" alt="Opera"></th>                   
                          </tr>
                          <tr>
                            <td style="text-align:left;">Geolocation</td>
                            <td>5.0</td>
                            <td>9.0</td>
                            <td>3.5</td>
                            <td>5.0</td>
                            <td>16.0</td>
                          </tr>
                        </tbody></table>

                        <br>Note: Geolocation is much more accurate for devices with GPS, like iPhone.
                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Using HTML Geolocation</h3> </div>
                  <div class="panel-body">  
                    <p>
                        Use the getCurrentPosition() method to get the user's position.
                        <br>The example below is a simple Geolocation example returning the latitude and longitude of the user's position:

                        <codeBody>
                            &lt;script&gt;
                            <br>var x = document.getElementById("demo");
                            <br>function getLocation() {
                            <br>&nbsp;&nbsp;&nbsp;    if (navigator.geolocation) {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        navigator.geolocation.getCurrentPosition(showPosition);
                            <br>&nbsp;&nbsp;&nbsp;    } else {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        x.innerHTML = "Geolocation is not supported by this browser.";
                            <br>&nbsp;&nbsp;&nbsp;    }
                            <br>}
                            <br>function showPosition(position) {
                            <br>&nbsp;&nbsp;&nbsp;    x.innerHTML = "Latitude: " + position.coords.latitude + 
                            <br>&nbsp;&nbsp;&nbsp;    "&lt;br&gt;Longitude: " + position.coords.longitude; 
                            <br>}
                            <br>&lt;/script&gt;
                        </codeBody>

                        <br>Example explained:
                        <ul>
                            <li>Check if Geolocation is supported</li>
                            <li>If supported, run the getCurrentPosition() method. If not, 
                            display a message to the user</li>
                            <li>If the getCurrentPosition() method is successful, it returns a coordinates object 
                            to the function specified in the parameter ( showPosition )</li>
                            <li>The showPosition() function gets the displays the Latitude and Longitude</li>
                        </ul>
                        <br>The example above is a very basic Geolocation script, with no error handling.
                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Handling Errors and Rejections</h3> </div>
                  <div class="panel-body">  
                    <p>
                        The second parameter of the getCurrentPosition() method is used to handle errors. It specifies a function to run if it fails to get the user's location:

                        <codeBody>
                            function showError(error) {
                            <br>&nbsp;&nbsp;&nbsp;    switch(error.code) {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        case error.PERMISSION_DENIED:
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            x.innerHTML = "User denied the request for Geolocation."
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            break;
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        case error.POSITION_UNAVAILABLE:
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            x.innerHTML = "Location information is unavailable."
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            break;
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        case error.TIMEOUT:
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;           x.innerHTML = "The request to get user location timed out."
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            break;
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        case error.UNKNOWN_ERROR:
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            x.innerHTML = "An unknown error occurred."
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;            break;
                            <br>&nbsp;&nbsp;&nbsp;    }
                            <br>}
                        </codeBody>    
                        <br>Error Codes:
                        <ul>
                            <li>Permission denied - The user did not allow Geolocation</li>
                            <li>Position unavailable - It is not possible to get the current location</li>
                            <li>Timeout - The operation timed out</li>
                        </ul>
                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Displaying the Result in a Map</h3> </div>
                  <div class="panel-body">  
                    <p>
                        To display the result in a map, you need access to a map service that can use latitude and longitude, like Google Maps:

                        <codeBody>
                            function showPosition(position) {
                            <br>&nbsp;&nbsp;&nbsp;    var latlon = position.coords.latitude + "," + position.coords.longitude;
                            <br>
                            <br>&nbsp;&nbsp;&nbsp;    var img_url = "http://maps.googleapis.com/maps/api/staticmap?center="+latlon+"&zoom=14&size=400x300&sensor=false";
                            <br>
                            <br>&nbsp;&nbsp;&nbsp;    document.getElementById("mapholder").innerHTML = "&lt;img src='"+img_url+"'&gt;";
                            <br>}
                        </codeBody>

                        <br>In the example above we use the returned latitude and longitude data to show the location in a Google map (using a static image).

                        <br>How to use a script to show an interactive map with a marker, zoom and drag options.
                        <codeBody>
                            function showPosition(position) {
                            <br>&nbsp;&nbsp;&nbsp;    lat = position.coords.latitude;
                            <br>&nbsp;&nbsp;&nbsp;    lon = position.coords.longitude;
                            <br>&nbsp;&nbsp;&nbsp;    latlon = new google.maps.LatLng(lat, lon)
                            <br>&nbsp;&nbsp;&nbsp;    mapholder = document.getElementById('mapholder')
                            <br>&nbsp;&nbsp;&nbsp;    mapholder.style.height = '250px';
                            <br>&nbsp;&nbsp;&nbsp;    mapholder.style.width = '500px';
                            <br>
                            <br>&nbsp;&nbsp;&nbsp;    var myOptions = {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    center:latlon,zoom:14,
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    mapTypeId:google.maps.MapTypeId.ROADMAP,
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    mapTypeControl:false,
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    navigationControlOptions:{style:google.maps.NavigationControlStyle.SMALL}
                            <br>&nbsp;&nbsp;&nbsp;    }
                            <br>    
                            <br>&nbsp;&nbsp;&nbsp;    var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
                            <br>&nbsp;&nbsp;&nbsp;    var marker = new google.maps.Marker({position:latlon,map:map,title:"You are here!"});
                            <br>}
                        </codeBody>

                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Location-specific Information</h3> </div>
                  <div class="panel-body">  
                    <p>
                        This page demonstrated how to show a user's position on a map. However, Geolocation is also very useful for location-specific information.

                        <br>Examples:
                        <ul>
                            <li>Up-to-date local information</li>
                            <li>Showing Points-of-interest near the user</li>
                            <li>Turn-by-turn navigation (GPS)</li>
                        </ul>

                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>The getCurrentPosition() Method - Return Data</h3> </div>
                  <div class="panel-body">  
                    <p>
                        The getCurrentPosition() method returns an object if it is successful. The latitude, longitude and accuracy properties are always returned. The other properties below are returned if available.

                        <table class="tabel table-striped">
                        <tbody><tr>
                        <th style="width:150px">Property</th>
                        <th>Description</th>
                        </tr>
                            <tr>
                        <td>coords.latitude</td>
                        <td>The latitude as a decimal number</td>
                            </tr>
                            <tr>
                        <td>coords.longitude</td>
                        <td>The longitude as a decimal number</td>
                            </tr>
                            <tr>
                        <td>coords.accuracy</td>
                        <td>The accuracy of position</td>
                            </tr>
                            <tr>
                        <td>coords.altitude</td>
                        <td>The altitude in meters above the mean sea level</td>
                            </tr>
                            <tr>
                        <td>coords.altitudeAccuracy</td>
                        <td>The altitude accuracy of position</td>
                            </tr>
                            <tr>
                        <td>coords.heading</td>
                        <td>The heading as degrees clockwise from North</td>
                            </tr>
                            <tr>
                        <td>coords.speed</td>
                        <td>The speed in meters per second</td>
                            </tr>
                            <tr>
                        <td>timestamp</td>
                        <td>The date/time of the response</td>
                            </tr>
                        </tbody></table>
                    </p>
                  </div>
                </div>
            </div> 

            <div class="col-lg-12">                
                <div class="panel panel-default">
                  <div class="panel-heading"><h3>Geolocation object - Other interesting Methods</h3> </div>
                  <div class="panel-body">  
                    <p>
                        <spanRed>watchPosition()</spanRed> - Returns the current position of the user and continues to return updated position as the user moves (like the GPS in a car).
                        <br><spanRed>clearWatch()</spanRed> - Stops the watchPosition() method.
                        <br>The example below shows the watchPosition() method. You need an accurate GPS device to test this (like iPhone):

                        <codeBody>
                            &lt;script&gt;
                            <br>var x = document.getElementById("demo");
                            <br>function getLocation() {
                            <br>&nbsp;&nbsp;&nbsp;    if (navigator.geolocation) {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        navigator.geolocation.watchPosition(showPosition);
                            <br>&nbsp;&nbsp;&nbsp;    } else {
                            <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;        x.innerHTML = "Geolocation is not supported by this browser.";
                            <br>&nbsp;&nbsp;&nbsp;    }
                            <br>}
                            <br>function showPosition(position) {
                            <br>&nbsp;&nbsp;&nbsp;    x.innerHTML = "Latitude: " + position.coords.latitude + 
                            <br>&nbsp;&nbsp;&nbsp;    "&lt;br&gt;Longitude: " + position.coords.longitude; 
                            <br>}
                            &lt;/script&gt;
                        </codeBody>

                    </p>
                  </div>
                </div>
            </div> 

            
        </div>       
        <!-- /.row -->

        <div ng-include='"templates/pager.html"'></div>
    </div>
    <!-- /.container -->
</div>
<!-- /.section -->


